<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>hp12c</title>
 <link href="http://melborne.github.io/atom.xml" rel="self"/>
 <link href="http://melborne.github.io"/>
 <updated>2013-04-17T10:47:41+09:00</updated>
 <id>http://melborne.github.io</id>
 <author>
   <name>kyoendo</name>
   <email>postagie@gmail.com</email>
 </author>

 
 <entry>
   <title>ギットハブにはてブとはてスタを殺されたので、このブログの人気記事一覧を作りました。</title>
   <link href="http://melborne.github.io/2013/04/15/i-need-bookmarks"/>
   <updated>2013-04-15T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/04/15/i-need-bookmarks</id>
   <content type="html">&lt;p&gt;セキュリティ対策としてのGitHub Pagesのドメイン変更によりこのブログの「はてなブックマーク」「はてなスター」が頓死しました。このブログは「はてなダイアリー」から移管したという歴史があるので、ブクマに関しこれで２度目の死を迎えたことになります。旧ドメインから新ドメインへはリダイレクトが張られているので、ブクマから記事へのアクセスは問題ありませんが、記事からブクマへの道が閉ざされました。過去のブコメを眺めるのが好きだったのに。今後もカスタムドメインを使う予定はないので、将来においても同じような悲劇が起こる可能性がありますが、今後もこの試練を受け入れようと思います。&lt;/p&gt;

&lt;p&gt;はてなスターに関しては、今までも挙動がおかしいなどの問題もあったのでこれを機に設置を止めることにしました。今まで星をありがとう。&lt;/p&gt;

&lt;p&gt;とは言っても、過去のブクマを全く参照できないというのも寂しすぎますよね。&lt;/p&gt;

&lt;p&gt;そんなわけで...&lt;/p&gt;

&lt;p&gt;過去記事に対するはてなブックマーク慰霊碑として、このブログ「&lt;strong&gt;hp12c&lt;/strong&gt;」の人気記事一覧（10ブクマ以上）をここに掲示して、その魂を慰めたいと思います。表における「hatena」ははてなダイアリー「&lt;a href=&quot;http://d.hatena.ne.jp/keyesberry/&quot; title=&quot;hp12c&quot;&gt;hp12c&lt;/a&gt;」における該当記事のブクマ数、「.com」は旧ドメインである&lt;strong&gt;melborne.github.com&lt;/strong&gt;のそれ、「.io」は新ドメインである&lt;strong&gt;melborne.github.io&lt;/strong&gt;のそれを示しています。&lt;/p&gt;

&lt;table cellpadding=3px border='solid 1px' align=center &gt;
  &lt;tr&gt;&lt;th&gt;hatena&lt;/th&gt;&lt;th&gt;.com&lt;/th&gt;&lt;th&gt;.io&lt;/th&gt;&lt;th&gt;title&lt;/th&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/04/09/to-newbie/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/04/09/to-newbie/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/04/09/to-newbie/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/04/09/to-newbie/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/04/09/to-newbie/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/04/09/to-newbie/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/04/09/to-newbie/'&gt;これからRubyを始める人たちへ&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20110622/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20110622/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20110622/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/'&gt;知って得する21のRubyのトリビアな記法 ~ 21 Trivia Notations you should know in Ruby&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/03/04/ruby-trivias-you-should-know-4/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/03/04/ruby-trivias-you-should-know-4/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/03/04/ruby-trivias-you-should-know-4/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/03/04/ruby-trivias-you-should-know-4/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/03/04/ruby-trivias-you-should-know-4/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/03/04/ruby-trivias-you-should-know-4/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/03/04/ruby-trivias-you-should-know-4/'&gt;知って得する！５５のRubyのトリビアな記法&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/02/25/i-wanna-say-something-about-rubys-case/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/02/25/i-wanna-say-something-about-rubys-case/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/02/25/i-wanna-say-something-about-rubys-case/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/02/25/i-wanna-say-something-about-rubys-case/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/02/25/i-wanna-say-something-about-rubys-case/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/02/25/i-wanna-say-something-about-rubys-case/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/02/25/i-wanna-say-something-about-rubys-case/'&gt;Rubyのcaseを〇〇(言語名)のswitch文だと思っている人たちにぼくから一言ガツンと申し上げたい&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/09/09/understand-js-oop-with-ruby-brain/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/09/09/understand-js-oop-with-ruby-brain/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/09/09/understand-js-oop-with-ruby-brain/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/09/09/understand-js-oop-with-ruby-brain/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/09/09/understand-js-oop-with-ruby-brain/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/09/09/understand-js-oop-with-ruby-brain/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/09/09/understand-js-oop-with-ruby-brain/'&gt;Ruby脳が理解するJavaScriptのオブジェクト指向&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/12/25/ebooks-for-learning-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/12/25/ebooks-for-learning-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/12/25/ebooks-for-learning-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/12/25/ebooks-for-learning-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/12/25/ebooks-for-learning-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/12/25/ebooks-for-learning-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/12/25/ebooks-for-learning-ruby/'&gt;今年の冬休みに電子書籍であなたがRubyを習得しなければいけないたった一つの理由&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20110929/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20110929/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20110929/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2011/09/29/irb-Ruby-fork-WebSocket/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2011/09/29/irb-Ruby-fork-WebSocket/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2011/09/29/irb-Ruby-fork-WebSocket/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2011/09/29/irb-Ruby-fork-WebSocket/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2011/09/29/irb-Ruby-fork-WebSocket/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2011/09/29/irb-Ruby-fork-WebSocket/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2011/09/29/irb-Ruby-fork-WebSocket/'&gt;irbから学ぶRubyの並列処理 ~ forkからWebSocketまで&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/07/16/ruby-methods-analysis/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/07/16/ruby-methods-analysis/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/07/16/ruby-methods-analysis/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/07/16/ruby-methods-analysis/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/07/16/ruby-methods-analysis/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/07/16/ruby-methods-analysis/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/07/16/ruby-methods-analysis/'&gt;Ruby、君のオブジェクトはなんて呼び出せばいいの？&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20120208/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20120208/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20120208/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/'&gt;第2弾!知って得する12のRubyのトリビアな記法 ~ 12 Trivia Notations you should know in Ruby&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/01/21/why-fp-with-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/01/21/why-fp-with-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/01/21/why-fp-with-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/01/21/why-fp-with-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/01/21/why-fp-with-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/01/21/why-fp-with-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/01/21/why-fp-with-ruby/'&gt;Rubyを使って「なぜ関数プログラミングは重要か」を読み解く（改定）─ 前編 ─ 但し後編の予定なし&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/09/15/understand-js-oop-with-ruby-brain-2/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/09/15/understand-js-oop-with-ruby-brain-2/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/09/15/understand-js-oop-with-ruby-brain-2/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/09/15/understand-js-oop-with-ruby-brain-2/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/09/15/understand-js-oop-with-ruby-brain-2/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/09/15/understand-js-oop-with-ruby-brain-2/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/09/15/understand-js-oop-with-ruby-brain-2/'&gt;Ruby脳が理解するJavaScriptのオブジェクト指向（その２）&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/01/24/csv-table-method-is-awesome/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/01/24/csv-table-method-is-awesome/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/01/24/csv-table-method-is-awesome/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/01/24/csv-table-method-is-awesome/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/01/24/csv-table-method-is-awesome/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/01/24/csv-table-method-is-awesome/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/01/24/csv-table-method-is-awesome/'&gt;Ruby標準添付ライブラリcsvのCSV.tableメソッドが最強な件について&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20101116/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20101116/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20101116/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2010/11/16/IRB-Rubyist/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2010/11/16/IRB-Rubyist/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2010/11/16/IRB-Rubyist/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2010/11/16/IRB-Rubyist/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2010/11/16/IRB-Rubyist/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2010/11/16/IRB-Rubyist/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2010/11/16/IRB-Rubyist/'&gt;IRB　それはRubyistの魔法のランプ&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/05/13/first-step-of-jekyll/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/05/13/first-step-of-jekyll/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/05/13/first-step-of-jekyll/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/05/13/first-step-of-jekyll/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/05/13/first-step-of-jekyll/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/05/13/first-step-of-jekyll/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/05/13/first-step-of-jekyll/'&gt;30分のチュートリアルでJekyllを理解する&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/05/05/to-be-hatena-notation-or-to-be-markdown/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/05/05/to-be-hatena-notation-or-to-be-markdown/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/05/05/to-be-hatena-notation-or-to-be-markdown/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/05/05/to-be-hatena-notation-or-to-be-markdown/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/05/05/to-be-hatena-notation-or-to-be-markdown/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/05/05/to-be-hatena-notation-or-to-be-markdown/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/05/05/to-be-hatena-notation-or-to-be-markdown/'&gt;一生涯はてな記法しますか？それともMarkdownしますか？&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/12/03/when-bloggers-become-publishers/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/12/03/when-bloggers-become-publishers/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/12/03/when-bloggers-become-publishers/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/12/03/when-bloggers-become-publishers/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/12/03/when-bloggers-become-publishers/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/12/03/when-bloggers-become-publishers/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/12/03/when-bloggers-become-publishers/'&gt;RubyによるMarkdownをベースにしたEPUB電子書籍の作り方と出版のお知らせ&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20101110/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20101110/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20101110/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2010/11/10/Ruby-Lisp/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2010/11/10/Ruby-Lisp/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2010/11/10/Ruby-Lisp/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2010/11/10/Ruby-Lisp/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2010/11/10/Ruby-Lisp/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2010/11/10/Ruby-Lisp/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2010/11/10/Ruby-Lisp/'&gt;((Rubyで) 書く (Lisp) インタプリタ)&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20110603/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20110603/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20110603/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2011/06/03/Sinatra-DSL-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2011/06/03/Sinatra-DSL-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2011/06/03/Sinatra-DSL-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2011/06/03/Sinatra-DSL-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2011/06/03/Sinatra-DSL-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2011/06/03/Sinatra-DSL-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2011/06/03/Sinatra-DSL-Ruby/'&gt;SinatraはDSLなんかじゃない、Ruby偽装を使ったマインドコントロールだ！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/10/02/draw-metro-map-with-gviz/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/10/02/draw-metro-map-with-gviz/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/10/02/draw-metro-map-with-gviz/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/10/02/draw-metro-map-with-gviz/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/10/02/draw-metro-map-with-gviz/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/10/02/draw-metro-map-with-gviz/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/10/02/draw-metro-map-with-gviz/'&gt;東京の地下鉄をGviz（Ruby Graphviz Wrapper）で描く&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/09/25/ruby-plus-graphviz-should-eql-gviz/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/09/25/ruby-plus-graphviz-should-eql-gviz/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/09/25/ruby-plus-graphviz-should-eql-gviz/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/09/25/ruby-plus-graphviz-should-eql-gviz/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/09/25/ruby-plus-graphviz-should-eql-gviz/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/09/25/ruby-plus-graphviz-should-eql-gviz/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/09/25/ruby-plus-graphviz-should-eql-gviz/'&gt;Yet Another Ruby Graphviz Interfaceを作ったからみんなで大量のグラフを作って遊ぼうよ！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20080802/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20080802/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20080802/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2008/08/02/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2008/08/02/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2008/08/02/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2008/08/02/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2008/08/02/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2008/08/02/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2008/08/02/Ruby/'&gt;Rubyのシンボルは文字列の皮を被った整数だ！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/08/17/what-is-dsl-for-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/08/17/what-is-dsl-for-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/08/17/what-is-dsl-for-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/08/17/what-is-dsl-for-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/08/17/what-is-dsl-for-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/08/17/what-is-dsl-for-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/08/17/what-is-dsl-for-ruby/'&gt;ねえRuby、どこまでが君でどこからが内部DSLなの？&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20101107/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20101107/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20101107/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2010/11/07/Ruby-ANSI/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2010/11/07/Ruby-ANSI/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2010/11/07/Ruby-ANSI/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2010/11/07/Ruby-ANSI/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2010/11/07/Ruby-ANSI/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2010/11/07/Ruby-ANSI/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2010/11/07/Ruby-ANSI/'&gt;RubyでANSIカラーシーケンスを学ぼう！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/04/27/ruby-heredoc-without-leading-whitespace/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/04/27/ruby-heredoc-without-leading-whitespace/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/04/27/ruby-heredoc-without-leading-whitespace/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/04/27/ruby-heredoc-without-leading-whitespace/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/04/27/ruby-heredoc-without-leading-whitespace/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/04/27/ruby-heredoc-without-leading-whitespace/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/04/27/ruby-heredoc-without-leading-whitespace/'&gt;チルダがRubyのヒアドキュメントをもっと良くする&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20111104/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20111104/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20111104/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2011/11/04/Ruby-end-END-HELL-Guard/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2011/11/04/Ruby-end-END-HELL-Guard/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2011/11/04/Ruby-end-END-HELL-Guard/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2011/11/04/Ruby-end-END-HELL-Guard/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2011/11/04/Ruby-end-END-HELL-Guard/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2011/11/04/Ruby-end-END-HELL-Guard/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2011/11/04/Ruby-end-END-HELL-Guard/'&gt;Rubyのendは美の観点から必要だ。END HELLは要リファクタへの警告である。メソッド分離、{ }、Guard、三項、ポリモーフィズムで回避せよ！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/04/26/ruby-trivias-you-should-know/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/04/26/ruby-trivias-you-should-know/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/04/26/ruby-trivias-you-should-know/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/04/26/ruby-trivias-you-should-know/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/04/26/ruby-trivias-you-should-know/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/04/26/ruby-trivias-you-should-know/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/04/26/ruby-trivias-you-should-know/'&gt;第３弾！知って得する12のRubyのトリビアな記法&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/06/18/i-am-inject-lover-too/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/06/18/i-am-inject-lover-too/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/06/18/i-am-inject-lover-too/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/06/18/i-am-inject-lover-too/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/06/18/i-am-inject-lover-too/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/06/18/i-am-inject-lover-too/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/06/18/i-am-inject-lover-too/'&gt;YOUたち!RubyでinjectしちゃいなYO!&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/10/29/rubys-new-control-structure-by-tap-and-break/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/10/29/rubys-new-control-structure-by-tap-and-break/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/10/29/rubys-new-control-structure-by-tap-and-break/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/10/29/rubys-new-control-structure-by-tap-and-break/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/10/29/rubys-new-control-structure-by-tap-and-break/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/10/29/rubys-new-control-structure-by-tap-and-break/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/10/29/rubys-new-control-structure-by-tap-and-break/'&gt;TapがRubyの新たな制御構造の世界を開く&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20110908/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20110908/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20110908/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2011/09/08/Ruby-CoffeeScript/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2011/09/08/Ruby-CoffeeScript/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2011/09/08/Ruby-CoffeeScript/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2011/09/08/Ruby-CoffeeScript/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2011/09/08/Ruby-CoffeeScript/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2011/09/08/Ruby-CoffeeScript/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2011/09/08/Ruby-CoffeeScript/'&gt;Ruby脳でCoffeeScriptのクラスを理解する&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/08/02/build-your-own-web-framework-with-rack/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/08/02/build-your-own-web-framework-with-rack/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/08/02/build-your-own-web-framework-with-rack/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/08/02/build-your-own-web-framework-with-rack/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/08/02/build-your-own-web-framework-with-rack/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/08/02/build-your-own-web-framework-with-rack/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/08/02/build-your-own-web-framework-with-rack/'&gt;エラーメッセージから学ぶRack最初の一歩&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/08/08/learn-rack-with-lack/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/08/08/learn-rack-with-lack/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/08/08/learn-rack-with-lack/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/08/08/learn-rack-with-lack/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/08/08/learn-rack-with-lack/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/08/08/learn-rack-with-lack/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/08/08/learn-rack-with-lack/'&gt;Rackをminifyした僅か100行のLackで学ぶRackの中身&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20111114/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20111114/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20111114/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2011/11/14/Ruby-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2011/11/14/Ruby-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2011/11/14/Ruby-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2011/11/14/Ruby-Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2011/11/14/Ruby-Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2011/11/14/Ruby-Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2011/11/14/Ruby-Ruby/'&gt;秋だ!Rubyを学ぼう! 〜Rubyを知るための２６ポスト&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/07/12/object-repeat-take-care-of-sequence/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/07/12/object-repeat-take-care-of-sequence/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/07/12/object-repeat-take-care-of-sequence/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/07/12/object-repeat-take-care-of-sequence/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/07/12/object-repeat-take-care-of-sequence/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/07/12/object-repeat-take-care-of-sequence/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/07/12/object-repeat-take-care-of-sequence/'&gt;RubyにおけるシーケンスはObject#repeatに任せなさい！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20100302/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20100302/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20100302/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2010/03/02/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2010/03/02/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2010/03/02/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2010/03/02/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2010/03/02/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2010/03/02/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2010/03/02/Ruby/'&gt;Ruby製ノコギリで株価を切り刻もう!&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/09/17/understand-js-oop-with-ruby-brain-3/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/09/17/understand-js-oop-with-ruby-brain-3/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/09/17/understand-js-oop-with-ruby-brain-3/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/09/17/understand-js-oop-with-ruby-brain-3/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/09/17/understand-js-oop-with-ruby-brain-3/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/09/17/understand-js-oop-with-ruby-brain-3/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/09/17/understand-js-oop-with-ruby-brain-3/'&gt;Ruby脳が理解するJavaScriptのオブジェクト指向（その３）&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/02/07/understand-ruby-object/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/02/07/understand-ruby-object/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/02/07/understand-ruby-object/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/02/07/understand-ruby-object/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/02/07/understand-ruby-object/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/02/07/understand-ruby-object/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/02/07/understand-ruby-object/'&gt;Rubyを始めたけど今ひとつRubyのオブジェクト指向というものが掴めないという人、ここに来て見て触って！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/01/28/make-ruby-script-encript-with-flippy/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/01/28/make-ruby-script-encript-with-flippy/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/01/28/make-ruby-script-encript-with-flippy/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/01/28/make-ruby-script-encript-with-flippy/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/01/28/make-ruby-script-encript-with-flippy/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/01/28/make-ruby-script-encript-with-flippy/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/01/28/make-ruby-script-encript-with-flippy/'&gt;RubyのコードをFlipして暗号化する？&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/09/11/understand-ruby-oop-with-js-brain/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/09/11/understand-ruby-oop-with-js-brain/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/09/11/understand-ruby-oop-with-js-brain/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/09/11/understand-ruby-oop-with-js-brain/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/09/11/understand-ruby-oop-with-js-brain/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/09/11/understand-ruby-oop-with-js-brain/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/09/11/understand-ruby-oop-with-js-brain/'&gt;JavaScript脳で理解するRubyのオブジェクト指向&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/books/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/books/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/books/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/books/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/books/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/books/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/books/'&gt;M'ELBORNE BOOKS&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/04/20/ruby-reference-index-is-renewed/#fnref:1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/04/20/ruby-reference-index-is-renewed/#fnref:1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/04/20/ruby-reference-index-is-renewed/#fnref:1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/04/20/ruby-reference-index-is-renewed/#fnref:1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/04/20/ruby-reference-index-is-renewed/#fnref:1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/04/20/ruby-reference-index-is-renewed/#fnref:1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/04/20/ruby-reference-index-is-renewed/#fnref:1'&gt;これからRubyのメソッドを全部覚えようとする人たちへ&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/12/28/retrieve-an-item-from-list-with-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/12/28/retrieve-an-item-from-list-with-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/12/28/retrieve-an-item-from-list-with-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/12/28/retrieve-an-item-from-list-with-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/12/28/retrieve-an-item-from-list-with-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/12/28/retrieve-an-item-from-list-with-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/12/28/retrieve-an-item-from-list-with-ruby/'&gt;Rubyで配列から要素を１つ取り出す良い方法はありませんか？&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/'&gt;melborne.github.com&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20110823/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20110823/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20110823/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2011/08/23/Ruby-CoffeeScript-Java-Processing-Javascript-Web/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2011/08/23/Ruby-CoffeeScript-Java-Processing-Javascript-Web/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2011/08/23/Ruby-CoffeeScript-Java-Processing-Javascript-Web/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2011/08/23/Ruby-CoffeeScript-Java-Processing-Javascript-Web/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2011/08/23/Ruby-CoffeeScript-Java-Processing-Javascript-Web/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2011/08/23/Ruby-CoffeeScript-Java-Processing-Javascript-Web/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2011/08/23/Ruby-CoffeeScript-Java-Processing-Javascript-Web/'&gt;RubyのようなCoffeeScriptを使ってJavaのようなProcessingを書いてJavascriptで実行してWebでビジュアライジング・データを実現しようよ!&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/09/03/learn-ruby-from-one/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/09/03/learn-ruby-from-one/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/09/03/learn-ruby-from-one/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/09/03/learn-ruby-from-one/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/09/03/learn-ruby-from-one/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/09/03/learn-ruby-from-one/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/09/03/learn-ruby-from-one/'&gt;１から始めるRuby (スライド版)&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/01/23/get-statistics-with-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/01/23/get-statistics-with-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/01/23/get-statistics-with-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/01/23/get-statistics-with-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/01/23/get-statistics-with-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/01/23/get-statistics-with-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/01/23/get-statistics-with-ruby/'&gt;Rubyで点数を集計するとき、あなたはどうしてますか？&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/08/06/use-rack-middleware/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/08/06/use-rack-middleware/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/08/06/use-rack-middleware/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/08/06/use-rack-middleware/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/08/06/use-rack-middleware/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/08/06/use-rack-middleware/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/08/06/use-rack-middleware/'&gt;エラーメッセージから学ぶRack - Middlewareの魔法&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20101012/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20101012/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20101012/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2010/10/12/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2010/10/12/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2010/10/12/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2010/10/12/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2010/10/12/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2010/10/12/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2010/10/12/Ruby/'&gt;Rubyでソート・アルゴリズムを表現しよう!&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20090318/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20090318/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20090318/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2009/03/18/notitle/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2009/03/18/notitle/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2009/03/18/notitle/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2009/03/18/notitle/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2009/03/18/notitle/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2009/03/18/notitle/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2009/03/18/notitle/'&gt;再帰は再帰なんかじゃない！末尾再帰こそが真の再帰なんだ！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/09/27/usstates-map-data-vasualization-with-gviz/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/09/27/usstates-map-data-vasualization-with-gviz/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/09/27/usstates-map-data-vasualization-with-gviz/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/09/27/usstates-map-data-vasualization-with-gviz/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/09/27/usstates-map-data-vasualization-with-gviz/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/09/27/usstates-map-data-vasualization-with-gviz/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/09/27/usstates-map-data-vasualization-with-gviz/'&gt;Ruby Graphvizラッパー「Gviz」でアメリカ合衆国をデータビジュアライズしよう！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/10/16/add-gviz-command-to-gviz-gem/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/10/16/add-gviz-command-to-gviz-gem/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/10/16/add-gviz-command-to-gviz-gem/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/10/16/add-gviz-command-to-gviz-gem/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/10/16/add-gviz-command-to-gviz-gem/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/10/16/add-gviz-command-to-gviz-gem/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/10/16/add-gviz-command-to-gviz-gem/'&gt;GvizでAKB48をビジュアライズするよ！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/02/15/ruby-mimic-arithmetic/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/02/15/ruby-mimic-arithmetic/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/02/15/ruby-mimic-arithmetic/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/02/15/ruby-mimic-arithmetic/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/02/15/ruby-mimic-arithmetic/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/02/15/ruby-mimic-arithmetic/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/02/15/ruby-mimic-arithmetic/'&gt;Rubyにおける算術演算の基礎&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20101202/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20101202/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20101202/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2010/12/02/Ruby-cal/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2010/12/02/Ruby-cal/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2010/12/02/Ruby-cal/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2010/12/02/Ruby-cal/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2010/12/02/Ruby-cal/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2010/12/02/Ruby-cal/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2010/12/02/Ruby-cal/'&gt;Rubyでcalをカラフルに&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/10/07/meet-prime-with-fibonacci/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/10/07/meet-prime-with-fibonacci/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/10/07/meet-prime-with-fibonacci/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/10/07/meet-prime-with-fibonacci/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/10/07/meet-prime-with-fibonacci/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/10/07/meet-prime-with-fibonacci/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/10/07/meet-prime-with-fibonacci/'&gt;素数とフィボナッチ数の出会いをGviz（Ruby Graphviz Wrapper）で描く&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/11/07/play-gviz-with-colorable/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/11/07/play-gviz-with-colorable/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/11/07/play-gviz-with-colorable/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/11/07/play-gviz-with-colorable/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/11/07/play-gviz-with-colorable/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/11/07/play-gviz-with-colorable/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/11/07/play-gviz-with-colorable/'&gt;Rubyライブラリ「Colorable」とGvizを使ってGraphvizで綺麗なリングを描く&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2012/12/13/ruby-parallel-on-ebook/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2012/12/13/ruby-parallel-on-ebook/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2012/12/13/ruby-parallel-on-ebook/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2012/12/13/ruby-parallel-on-ebook/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2012/12/13/ruby-parallel-on-ebook/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2012/12/13/ruby-parallel-on-ebook/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2012/12/13/ruby-parallel-on-ebook/'&gt;電子書籍「irbから学ぶRubyの並列処理 ~ forkからWebSocketまで」EPUB版をGumroadから出版しました！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt; &lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2013/02/10/tsv-to-ltsv-in-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/02/10/tsv-to-ltsv-in-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/02/10/tsv-to-ltsv-in-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2013/02/10/tsv-to-ltsv-in-ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/02/10/tsv-to-ltsv-in-ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2013/02/10/tsv-to-ltsv-in-ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.com/2013/02/10/tsv-to-ltsv-in-ruby/'&gt;私、RubyでならTSVからLTSV作れます！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;a href=http://d.hatena.ne.jp/keyesberry/20101105/p1 target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp/keyesberry/20101105/p1 class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/keyesberry/20101105/p1 alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.com/2010/11/05/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.com/2010/11/05/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2010/11/05/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=http://melborne.github.io/2010/11/05/Ruby/ target=_blank&gt; &lt;/a&gt;&lt;a href=http://b.hatena.ne.jp/entry/http://melborne.github.io/2010/11/05/Ruby/ class=http-bookmark target=_blank&gt;&lt;img src=http://b.hatena.ne.jp/entry/image/http://melborne.github.io/2010/11/05/Ruby/ alt=error class=http-bookmark&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='http://melborne.github.io/2010/11/05/Ruby/'&gt;Rubyのモジュール関数を理解しよう！&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;/table&gt;


&lt;p&gt;と言いつつも、この記事は未読記事へ読者を誘導するステマにもなっているのでした。興味がある記事見つけたら、ブクマよろしくね！&lt;/p&gt;

&lt;p&gt;参考： &lt;a href=&quot;https://github.com/blog/1452-new-github-pages-domain-github-io&quot; title=&quot;New GitHub Pages domain: github.io&quot;&gt;New GitHub Pages domain: github.io&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Rubyではじめてのコードゴルフ</title>
   <link href="http://melborne.github.io/2013/04/08/my-first-ruby-golf"/>
   <updated>2013-04-08T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/04/08/my-first-ruby-golf</id>
   <content type="html">&lt;h2&gt;─問題─&lt;/h2&gt;

&lt;p&gt;次の文章における最長単語を出力する最短のコードを書きなさい（文章はコードに含まれていること）。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia deserunt mollit anim id est laborum
&lt;/code&gt;&lt;/pre&gt;

&lt;br /&gt;


&lt;h2&gt;─僕の答え─&lt;/h2&gt;

&lt;p&gt;僕のコードの実行結果です。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;% ruby longest_word.rb
&lt;span class=&quot;s2&quot;&gt;&amp;quot;reprehenderit&amp;quot;&lt;/span&gt;
% wc longest_word.rb
       1      71     459 longest_word.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;最長単語は「&lt;strong&gt;reprehenderit&lt;/strong&gt;」で、ファイルバイト数は459でした。&lt;/p&gt;

&lt;p&gt;少し下に実装を貼っておきますね。&lt;/p&gt;

&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;


&lt;br /&gt;




&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(Lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia deserunt mollit anim id est laborum)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_by&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:size&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ちょっとズルいですかね〜。&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Graphvizレイアウトサンプル</title>
   <link href="http://melborne.github.io/2013/04/02/graphviz-layouts"/>
   <updated>2013-04-02T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/04/02/graphviz-layouts</id>
   <content type="html">&lt;p&gt;Graphvizには複数のレイアウトフォーマットがありますが、どれも名前が変わっていて生成されるレイアウトを名前から想像することが困難です。幾つかのレイアウトの説明は&lt;a href=&quot;http://www.graphviz.org/&quot; title=&quot;Graphviz | Graphviz - Graph Visualization Software&quot;&gt;Graphvizのサイト&lt;/a&gt;に書いてあるのですが、それを読んでもやっぱりピンと来ません。その結果、毎度グラフを作るたびにレイアウトを試行錯誤することになります。&lt;/p&gt;

&lt;p&gt;でも、レイアウトはやっぱりサンプルを見るのが一番手っ取り早いですよね。&lt;/p&gt;

&lt;br/&gt;


&lt;p&gt;そんなわけで...&lt;/p&gt;

&lt;br/&gt;


&lt;p&gt;Graphvizのレイアウトサンプルを作って、ここに貼っておくことにします。サンプルの作成にはいつもの様に&lt;a href=&quot;https://rubygems.org/gems/gviz&quot; title=&quot;gviz | RubyGems.org | your community gem host&quot;&gt;Gviz&lt;/a&gt;を使います。ちなみにGviz0.1.2では、gvizコマンドの-mオプションでlayouts一覧を表示できるようになりました。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;% gviz -m layouts
Layouts:
  circo, dot, fdp, neato, nop, nop1, nop2, osage, patchwork, sfdp, twopi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;




&lt;br/&gt;


&lt;h2&gt;サンプル生成─その１&lt;/h2&gt;

&lt;p&gt;最初に、１つのノードに対し複数のノードを連結したグラフを書いてみます。コードは次のようになります&lt;sup id='fnref:1'&gt;&lt;a href='#fn:1' rel='footnote'&gt;1&lt;/a&gt;&lt;/sup&gt;。ノードの色付けをするために&lt;a href=&quot;https://rubygems.org/gems/colorable&quot; title=&quot;colorable | RubyGems.org | your community gem host&quot;&gt;Colorable gem&lt;/a&gt;を使っています。&lt;/p&gt;

&lt;div&gt;&lt;script src='https://gist.github.com/5292308.js?file=graph.ru'&gt;&lt;/script&gt;
&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;require &amp;quot;colorable&amp;quot;
cs = Colorable::Colorset[:hsb]

layouts = %w(dot circo fdp sfdp neato twopi osage patchwork)
ns = [*:A..:Z]

nodes shape:'circle', style:'filled'
layouts.each do |layout|
  global layout:layout
  route ns.first =&amp;gt; ns.drop(1)
  ns.each do |n|
    c = cs.next
    node n, color:c.hex, fillcolor:&amp;quot;#{c.hex}aa&amp;quot;
  end
  save layout.intern, :png
end
&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;


&lt;p&gt;このコードのディレクトリでgvizコマンドを実行し、各レイアウト毎のpng画像を得ます。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;% gviz
% open *.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;




&lt;br/&gt;


&lt;h2&gt;レイアウトサンプル─その１&lt;/h2&gt;

&lt;p&gt;生成されたレイアウト画像は以下のとおりです。&lt;/p&gt;

&lt;h3&gt;dot&lt;/h3&gt;

&lt;p&gt;階層型のデフォルトレイアウトです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/dot.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;neato&lt;/h3&gt;

&lt;p&gt;ばねモデルによる&lt;strong&gt;neato&lt;/strong&gt;レイアウトです。全体のエネルギーが最小になるようなレイアウトを実現します。ノードが100程度のグラフ生成に適しているそうです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/neato.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;fdp&lt;/h3&gt;

&lt;p&gt;同じくばねモデルによるレイアウトです。&lt;strong&gt;neato&lt;/strong&gt;に似てますが、アルゴリズムが異なるようです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/fdp.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;sfdp&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;fdp&lt;/strong&gt;のマルチスケール版とのことです。ノードが大量にあるグラフに適しているそうです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/sfdp.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;twopi&lt;/h3&gt;

&lt;p&gt;放射状レイアウトです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/twopi.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;circo&lt;/h3&gt;

&lt;p&gt;環状レイアウトです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/circo.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;osage&lt;/h3&gt;

&lt;p&gt;ノードを整列配置するレイアウトです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/osage.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;patchwork&lt;/h3&gt;

&lt;p&gt;ノードをパッチワークのように配置するレイアウトです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/patchwork.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;br /&gt;


&lt;p&gt;レイアウトを変えただけで、こんなに多様なグラフが描けるなんて。Graphviz最高ですよね。&lt;/p&gt;

&lt;h2&gt;サンプル生成─その２&lt;/h2&gt;

&lt;p&gt;続いて、バイナリーツリー型のグラフを生成してみます。コードは以下のとおり。&lt;/p&gt;

&lt;div&gt;&lt;script src='https://gist.github.com/5292308.js?file=tree.ru'&gt;&lt;/script&gt;
&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;require &amp;quot;colorable&amp;quot;
CS = Colorable::Colorset[:hsb]

def build_tree(layout)
  global layout:layout
  nodes shape:'circle', style:'filled'

  ns = [*:A..:Z]
  ns.each do |n|
    c = CS.next
    node n, color:c.hex, fillcolor:&amp;quot;#{c.hex}aa&amp;quot;
  end

  targets = [ns.shift]
  catch do |tag|
    loop do
      next_target ||= []
      targets.each do |parent|
        childs = ns.shift(2)
        throw tag if childs.empty?
        route parent =&amp;gt; childs
        next_target += childs
      end
      targets = next_target
    end
  end
  save &amp;quot;tree_#{layout}&amp;quot;.intern, :png
end

layouts = %w(dot circo fdp sfdp neato twopi osage patchwork)

layouts.each { |layout| build_tree layout }
&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;


&lt;p&gt;ツリー生成のコードが若干トリッキーかも知れませんが、上から順番にツリーを作っているので追えばわかると思います。loopとeachを一気に抜けて終了するために&lt;strong&gt;catch-throw&lt;/strong&gt;を使っています。&lt;/p&gt;

&lt;br/&gt;


&lt;h2&gt;レイアウトサンプル２&lt;/h2&gt;

&lt;p&gt;生成されたレイアウト画像は以下のとおりです。&lt;/p&gt;

&lt;h3&gt;dot&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_dot.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;neato&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_neato.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;fdp&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_fdp.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;sfdp&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_sfdp.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;twopi&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_twopi.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;circo&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_circo.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;osage&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_osage.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;h3&gt;patchwork&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/04/tree_patchwork.png&quot; alt=&quot;graphviz noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;キレイ、キレイ！&lt;/p&gt;

&lt;p&gt;以上、Graphvizのレイアウトサンプルを生成してみました。&lt;/p&gt;

&lt;hr /&gt;

&lt;p style='color:red'&gt;=== Ruby関連電子書籍100円で好評発売中！ ===&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;/books/&quot; title=&quot;M'ELBORNE BOOKS&quot;&gt;M'ELBORNE BOOKS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2012/start_ruby.jpg&quot; alt=&quot;start_ruby&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2013/02/ruby_object_cover.png&quot; alt=&quot;ruby_object&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2012/rack_cover.png&quot; alt=&quot;rack&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot;&gt;
    &lt;ol&gt;
        &lt;li id='fn:1'&gt;nop系の出力が上手くいかなかったので除外しました &lt;a href='#fnref:1' rev='footnote'&gt;↩&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
&lt;/div&gt;



</content>
 </entry>
 
 <entry>
   <title>Rubyの条件分岐をメソッド化する</title>
   <link href="http://melborne.github.io/2013/04/01/methodize-a-conditional-operator"/>
   <updated>2013-04-01T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/04/01/methodize-a-conditional-operator</id>
   <content type="html">&lt;p&gt;(追記：2013-04-02) 4月1日が終わったのでタイトルを変えました。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;変数の値が真か偽で制御を分岐する場合、Rubyでは普通「&lt;strong&gt;if-else&lt;/strong&gt;」を使います。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;ruby is now twenty years old.&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;ruby was merged with perl.&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; &amp;quot;ruby was merged with perl.&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;条件分岐で返す式が短い場合、条件演算子「&lt;strong&gt;? : &lt;/strong&gt;」もよく使われています。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; &amp;quot;ruby was merged with perl.&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;しかしこれらの制御構造にはそれらが制御構造であるがゆえの欠点があります。&lt;/p&gt;

&lt;p&gt;それは、そのままではメソッドチェーンにちょっと乗せづらいということです。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capitalize&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; &amp;quot;Ruby was merged with perl.&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capitalize&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; &amp;quot;Ruby was merged with perl.&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;




&lt;br /&gt;


&lt;p&gt;そんなわけで...&lt;/p&gt;

&lt;br /&gt;


&lt;p&gt;条件分岐をメソッド化した「&lt;strong&gt;_?&lt;/strong&gt;」メソッドというものを考えてみました。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;define_singleton_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:_?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil?&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;true&lt;/strong&gt;, &lt;strong&gt;false&lt;/strong&gt;, &lt;strong&gt;nil&lt;/strong&gt;の各オブジェクトに&lt;strong&gt;_?&lt;/strong&gt;メソッドを定義しています。このメソッドの第１引数にはselfがtrueのときに返す値を、第２引数にはselfがfalseのときに返す値を渡します。&lt;/p&gt;

&lt;p&gt;先の例を_?メソッドを使って書き換えてみます。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;ruby is now twenty years old.&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;ruby was merged with perl.&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capitalize&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; &amp;quot;Ruby was merged with perl.&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capitalize&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ruby_status&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; &amp;quot;Ruby is now twenty years old.&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;_?はブロックを取ることができ、手続きを返したいときはブロックで実現します。ブロック引数にはselfが渡るので、ブロックの中で条件分岐して手続きを書きます。ちょっとダサいですけど。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;april_first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bool&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;*&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upcase&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;*&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;#&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upcase&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;#&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;truth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# &amp;gt;&amp;gt; **************************&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;gt;&amp;gt; RUBY WAS MERGED WITH PERL.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;gt;&amp;gt; **************************&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ということで、どうやらRubyはPerlにマージされたそうですよ。&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>スペースインベーダー、Graphviz侵略ス</title>
   <link href="http://melborne.github.io/2013/03/28/space-invader-invade-graphviz-kingdom"/>
   <updated>2013-03-28T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/03/28/space-invader-invade-graphviz-kingdom</id>
   <content type="html">&lt;p&gt;Graphvizには「&lt;strong&gt;osage&lt;/strong&gt;」という変わった名前のレイアウトがあります。これは多数のノードを整列して配置します。GraphvizのRubyラッパー「&lt;a href=&quot;https://rubygems.org/gems/gviz&quot; title=&quot;gviz | RubyGems.org | your community gem host&quot;&gt;gviz&lt;/a&gt;」を使って100個のノードを整列表示するには次のようにします&lt;sup id='fnref:1'&gt;&lt;a href='#fn:1' rel='footnote'&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;h4&gt;graph.ru&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;osage&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;square&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;0.8&amp;#39;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:osage&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ターミナルで&lt;code&gt;gviz&lt;/code&gt;コマンドを実行し生成されたDOTファイルを開くと、次のグラフが得られます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/invader1.png&quot; alt=&quot;invader noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;0と99は反転していますが、1から順番にノードが整列配置されているのがわかります。&lt;/p&gt;

&lt;p&gt;前回の投稿ではGraphvizのこの能力を使ってカラータイルを作りましたが、今更ながらこれは正に「ドットマトリクス」であるなあと気付いたのでした。ドットマトリクスといえば、そう「ドット絵」です。&lt;/p&gt;

&lt;p&gt;そんなわけで...&lt;/p&gt;

&lt;p&gt;今回は、Graphvizで「スペースインベーダー」を描いてみるという、アホな企画です。良い子の皆さんは真似しないでくださいね。&lt;/p&gt;

&lt;p&gt;ところで、スペースインベーダー、知ってますか？&lt;/p&gt;

&lt;h2&gt;スペースインベーダーのドットマトリクス&lt;/h2&gt;

&lt;p&gt;まずは、ネットから次のようなインベーダーの画像を取得します。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/invader2.png&quot; alt=&quot;invader noshadow_noround&quot; /&gt;&lt;/p&gt;

&lt;p&gt;そして、この画像に基いて二次元配列データを作ります。座標値または座標レンジを使って画が存在するドットを指定していきます（ここでは横幅を12ドットとしています）。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Pieceオブジェクトの生成&lt;/h2&gt;

&lt;p&gt;次に、Pieceクラスを用意して、このドットデータを持ったPieceオブジェクトを生成するようにします。デフォルトで画があるところにはtrue、無いところにはfalseをセットする二次元配列を、mapインスタンス変数で保持させます。&lt;/p&gt;

&lt;h4&gt;invader.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Piece&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:map&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filling&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@filling&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filling&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;build_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@filling&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conv2st_len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@filling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;conv2st_len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Fixnum&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Range&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Accept only Fixnum or Range&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;build_mapメソッドは、すべてがfalse値の二次元配列を生成し、渡されたmapデータをArray#fillを使って埋め込むようにします。conv2st_lenメソッドは、座標値と座標レンジを統一的に扱えるように前処理します。&lt;/p&gt;

&lt;p&gt;このPieceクラスを使って、先のデータに基づいたkaniオブジェクトを生成します。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Piece&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:kani&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; [[false, false, false, true, false, false, false, false, false, true, false, false], [false, false, false, false, true, false, false, false, true, false, false, false], [false, false, false, true, true, true, true, true, true, true, false, false], [false, false, true, true, false, true, true, true, false, true, true, false], [false, true, true, true, true, true, true, true, true, true, true, true], [false, true, false, true, true, true, true, true, true, true, false, true], [false, true, false, true, false, false, false, false, false, true, false, true], [false, false, false, false, true, true, false, true, true, false, false, false]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Pieceオブジェクトの描画&lt;/h2&gt;

&lt;p&gt;さて、データの準備ができたので、Graphvizで描画してみます。&lt;/p&gt;

&lt;h4&gt;graph.ru&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;./invader&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Piece&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:kani&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;osage&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;square&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;0.8&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;filled&amp;#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#00FFFF&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#000000&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fillcolor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:invader&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;osageレイアウトでは縦横のドット数が異なると配列がズレてしまうので、kani_mapでは横配列数(12ドット)に合わせて縦配列数を調整しています。eachでkaniオブジェクトのmapを展開し、各ドットの値（trueまたはfalse）に応じてノードの色を変えます。&lt;/p&gt;

&lt;p&gt;出力です。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/invader3.png&quot; alt=&quot;invader noshadow_noround&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Graphviz上にスペースインベーダーが現れました。&lt;/p&gt;

&lt;br /&gt;




&lt;br /&gt;


&lt;p&gt;でも、カニ一匹じゃ、寂しいです..よね..&lt;/p&gt;

&lt;p&gt;もっと広いキャンバスに、インベーダー表示したいですよね。&lt;/p&gt;

&lt;p&gt;もう少しがんばって..みますか..&lt;/p&gt;

&lt;h2&gt;Canvasオブジェクトの生成&lt;/h2&gt;

&lt;p&gt;Pieceオブジェクトを配置するCanvasオブジェクトを用意します。Canvasクラスを定義しましょう。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Canvas&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Enumerable&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filling&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filling&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;piece&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;piece&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@map&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Canvasクラスは、任意サイズの二次元配列を保持します。そして&lt;code&gt;Canvas#fill&lt;/code&gt;メソッドにより、Canvasオブジェクト上の任意の位置に、Pieceオブジェクトのマップを埋め込めるようにします。&lt;/p&gt;

&lt;p&gt;さあ、Canvas上にkaniを埋め込んで表示します。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;./invader&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Piece&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:kani&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#00FFFF&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;osage&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;square&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;0.8&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;filled&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;penwidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#000000&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fillcolor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:invader&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ここでは、&lt;code&gt;Piece.new&lt;/code&gt;の第3引数に色を直接渡しています。&lt;/p&gt;

&lt;p&gt;出力です。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/invader4.png&quot; alt=&quot;invader noshadow_noround&quot; /&gt;&lt;/p&gt;

&lt;p&gt;よし。&lt;/p&gt;

&lt;p&gt;じゃあ、全員集合といきましょうか。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;./invader&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ika_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tako_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;wall_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;battery_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;fire_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ika&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;taco&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;battery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fire&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ika&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ika_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#00FF00&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:kani&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kani_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#00FFFF&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:tako&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tako_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#FF00FF&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:wall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wall_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#FF0000&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:battery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;battery_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#00FFFF&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:fire&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fire_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#FFFF00&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Piece&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ika&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kani&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;taco&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;85&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;105&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;battery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fire&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;osage&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;square&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;0.8&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;filled&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;penwidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;#000000&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fillcolor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:invader&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;




&lt;br /&gt;


&lt;br /&gt;


&lt;p&gt;どうだ。&lt;/p&gt;

&lt;br /&gt;




&lt;br /&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/invader5.png&quot; alt=&quot;invader noshadow_noround&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ヒャホー！&lt;/p&gt;

&lt;br /&gt;


&lt;p&gt;「スペースインベーダー、Graphviz侵略ス。」&lt;/p&gt;

&lt;br /&gt;


&lt;br /&gt;




&lt;div&gt;&lt;script src='https://gist.github.com/5254390.js?file='&gt;&lt;/script&gt;
&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;


&lt;hr /&gt;

&lt;p style='color:red'&gt;=== Ruby関連電子書籍100円で好評発売中！ ===&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;/books/&quot; title=&quot;M'ELBORNE BOOKS&quot;&gt;M'ELBORNE BOOKS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2012/start_ruby.jpg&quot; alt=&quot;start_ruby&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2013/02/ruby_object_cover.png&quot; alt=&quot;ruby_object&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2013/03/ruby_trivia_cover.png&quot; alt=&quot;trivia&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;footnotes&quot;&gt;
    &lt;ol&gt;
        &lt;li id='fn:1'&gt;patchworkというレイアウトでも同様のことができます。 &lt;a href='#fnref:1' rev='footnote'&gt;↩&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
&lt;/div&gt;



</content>
 </entry>
 
 <entry>
   <title>これもまた、Graphvizなんです。</title>
   <link href="http://melborne.github.io/2013/03/25/this-is-another-world-of-graphviz"/>
   <updated>2013-03-25T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/03/25/this-is-another-world-of-graphviz</id>
   <content type="html">&lt;p&gt;レイアウトを「&lt;strong&gt;osage&lt;/strong&gt;」にすると、ノードを整列してくれます。&lt;/p&gt;

&lt;h2&gt;スクエア&lt;/h2&gt;

&lt;div&gt;&lt;script src='https://gist.github.com/5236877.js?file=graph2.ru'&gt;&lt;/script&gt;
&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;require &amp;quot;colorable&amp;quot;

cs = Colorable::Colorset[:hsb]

global layout:'osage'
nodes shape:'square', style:'filled', penwidth:5

100.times do |i|
  node i.to_id, label:'', width:1.4, fillcolor:&amp;quot;#{cs.next.hex}bb&amp;quot;
end

save :g, :png&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/tile2.png&quot; alt=&quot;tile noshadow&quot; /&gt;&lt;/p&gt;

&lt;h2&gt;サークル&lt;/h2&gt;

&lt;div&gt;&lt;script src='https://gist.github.com/5236877.js?file=graph.ru'&gt;&lt;/script&gt;
&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;require &amp;quot;colorable&amp;quot;

cs = Colorable::Colorset[:rgb]

global layout:'osage'
nodes shape:'circle', style:'filled', penwidth:5

100.times do |i|
  node i.to_id, label:'', width:1.4, fillcolor:&amp;quot;#{cs.next.hex}bb&amp;quot;
end

save :g, :png&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/tile1.png&quot; alt=&quot;tile noshadow&quot; /&gt;&lt;/p&gt;

&lt;h2&gt;オクタゴン&lt;/h2&gt;

&lt;div&gt;&lt;script src='https://gist.github.com/5236877.js?file=graph3.ru'&gt;&lt;/script&gt;
&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;require &amp;quot;colorable&amp;quot;

cs = Colorable::Colorset[:hsb]

global layout:'osage'
nodes shape:'doubleoctagon', style:'filled', penwidth:5

100.times do |i|
  node i.to_id, label:'', width:1.4, fillcolor:&amp;quot;#{cs.at(rand 100).hex}bb&amp;quot;
end

save :g, :png&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/tile3.png&quot; alt=&quot;tile noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;キレイですね！&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Graphvizで作る、私たちの国「日本」の今度こそ本当の姿かたち</title>
   <link href="http://melborne.github.io/2013/03/25/map-of-japan-2"/>
   <updated>2013-03-25T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/03/25/map-of-japan-2</id>
   <content type="html">&lt;p&gt;僕は前回、&lt;a href=&quot;http://d.hatena.ne.jp/antlabo/&quot;&gt;antlabo&lt;/a&gt;さんが公開されている&lt;a href=&quot;http://d.hatena.ne.jp/antlabo/20121029/1351520444&quot;&gt;全国市区町村の隣接データ&lt;/a&gt;に基いて、Graphvizで次のような日本を作りました。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/images/2013/03/jpmap_svg.html&quot; title=&quot;Metro Map&quot;&gt;&lt;img src=&quot;/assets/images/2013/03/jpmap_color.png&quot; alt=&quot;japan noshadow&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://melborne.github.com/2013/03/22/map-of-japan/&quot; target=&quot;_blank&quot;&gt;&quot;Graphvizで作る、私たちの国「日本」の本当の姿かたち&quot; &lt;/a&gt;&lt;a href=&quot;http://b.hatena.ne.jp/entry/http://melborne.github.com/2013/03/22/map-of-japan/&quot; class=&quot;http-bookmark&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;http://b.hatena.ne.jp/entry/image/http://melborne.github.com/2013/03/22/map-of-japan/&quot; alt=&quot;error&quot; class=&quot;http-bookmark&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ええ、これが「日本」です。&lt;/p&gt;

&lt;p&gt;まあ、これはこれで面白かったのですが、全体的形状としては現実の日本国土とは程遠いものとなりました。都道府県の隣接情報に基いて日本を書いたときや、州の隣接情報に基いて米国を書いたときには、それなりに上手くいっていたのですが、今回のようにノード数が異常に多いとGraphvizにおける配置演算が難しくなって、隣接ノード間の距離がまちまちになってしまうのです。&lt;/p&gt;

&lt;p&gt;それで、各市町村の位置情報があればうまくいくはずということで、どこかにそのようなデータがないか探してみたところ、&lt;a href=&quot;http://nlftp.mlit.go.jp/isj/&quot; title=&quot;位置参照情報ダウンロードサービス&quot;&gt;位置参照情報ダウンロードサービス&lt;/a&gt;という国土交通省のサイトを見つけ、早々ダウンロードして使ってみました。しかし、位置情報が街区単位（何丁目何番地）と細かく、データの前処理が面倒だなーと思っていたのでした。&lt;/p&gt;

&lt;p&gt;そんな折、先のantlaboさんが僕とのツイッターでのやり取りをきっかけに、なんと、全国市町村の役所の位置情報データを公開してくれることになったのです。&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://d.hatena.ne.jp/antlabo/20130324/1364107139&quot; title=&quot;都道府県市区町村データ公開その3 - 蟻の実験工房（別館ラボ）&quot;&gt;都道府県市区町村データ公開その3 - 蟻の実験工房（別館ラボ）&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;スバラシイ！&lt;/p&gt;

&lt;p&gt;そんなわけで...&lt;/p&gt;

&lt;p&gt;今回は、この都道府県市区町村の位置情報に基いて日本地図を描いてみようと思います。ツールはいつものように&lt;a href=&quot;https://rubygems.org/gems/gviz&quot; title=&quot;gviz | RubyGems.org | your community gem host&quot;&gt;gviz&lt;/a&gt;を使います。&lt;/p&gt;

&lt;p&gt;ノードの位置情報を使ってGraphvizを描くことは既に、「&lt;a href=&quot;http://melborne.github.com/2012/10/02/draw-metro-map-with-gviz/&quot; title=&quot;東京の地下鉄をGviz（Ruby Graphviz Wrapper）で描く&quot;&gt;東京の地下鉄をGviz（Ruby Graphviz Wrapper）で描く&lt;/a&gt;」で経験しているので、今回はスムーズにいくと思います。では、ステップ・バイ・ステップで。&lt;/p&gt;

&lt;h2&gt;インストール&lt;/h2&gt;

&lt;p&gt;Graphvizが必要です。自分のプラットフォームに合ったものを以下から入手して下さい。&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://www.graphviz.org/Download..php&quot; title=&quot;Download. | Graphviz - Graph Visualization Software&quot;&gt;Download. | Graphviz - Graph Visualization Software&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Gvizのインストールは&lt;code&gt;gem install gviz&lt;/code&gt;でＯＫです。Rubyは1.9.3以降が必要となります。&lt;/p&gt;

&lt;h2&gt;データの前処理&lt;/h2&gt;

&lt;p&gt;まずは、先のantlaboさんのサイトから&lt;code&gt;city_location_utf8.csv&lt;/code&gt;を取得します。このデータは以下のようなtab separated valueになってます&lt;sup id='fnref:1'&gt;&lt;a href='#fn:1' rel='footnote'&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;id   pref    name    lat lon
673 三重県   いなべ市    35.16079322 136.5017665
796 三重県   亀山市   34.87762199 136.38172496
977 三重県   伊勢市   34.47547466 136.72519867
793 三重県   伊賀市   34.72972645 136.18121136
1040    三重県   南伊勢町    34.30874507 136.58644797
835 三重県   名張市   34.61712737 136.11750322
  ・
  ・
  ・
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;いつものようにこのデータを直接Gvizに渡してもいいんですが、今回は一手間掛けてCityオブジェクトを作りそれを渡すようにしてみます。&lt;code&gt;city.rb&lt;/code&gt;というファイルを作ってCityクラスを作り、このデータに基いてCityオブジェクトを生成します。こんな感じです。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# encoding: UTF-8&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;City&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Struct&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:lon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@cities&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cities&lt;/span&gt;
      &lt;span class=&quot;vc&quot;&gt;@@cities&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vc&quot;&gt;@@cities&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;@@citiesに生成した全Cityオブジェクトを保持し、City.citiesでアクセスできるようにします。&lt;/p&gt;

&lt;p&gt;では、CSVライブラリを使ってデータを読み出し、Cityオブジェクトを生成しましょう。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;csv&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tsv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CSV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;city_location_utf8.csv&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col_sep&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:&amp;quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tsv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; #&amp;lt;CSV::Row id:673 pref:&amp;quot;三重県&amp;quot; name:&amp;quot;いなべ市&amp;quot; lat:35.16079322 lon:136.5017665&amp;gt;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tsv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 1747&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; #&amp;lt;struct City id=673, pref=&amp;quot;三重県&amp;quot;, name=&amp;quot;いなべ市&amp;quot;, lat=35.16079322, lon=136.5017665&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;こういうときは、&lt;code&gt;CSV.table&lt;/code&gt;が便利です。詳しくは&lt;a href=&quot;http://melborne.github.com/2013/01/24/csv-table-method-is-awesome/&quot; title=&quot;Ruby標準添付ライブラリcsvのCSV.tableメソッドが最強な件について&quot;&gt;こちら&lt;/a&gt;を。&lt;/p&gt;

&lt;p&gt;Graphvizで絶対位置を指定するときは値を正規化する必要があり、そのために緯度経度のレンジ（最小値-最大値）を使いますので、Cityクラスにこれらの値を保持させましょう。&lt;code&gt;City.lat_range&lt;/code&gt;, &lt;code&gt;City.lon_range&lt;/code&gt;を定義します。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;City&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Struct&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:lon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@lat_range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vc&quot;&gt;@@lon_range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lat_range&lt;/span&gt;
      &lt;span class=&quot;vc&quot;&gt;@@lat_range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Range&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;vc&quot;&gt;@@cities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minmax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lon_range&lt;/span&gt;
      &lt;span class=&quot;vc&quot;&gt;@@lon_range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Range&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;vc&quot;&gt;@@cities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:lon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minmax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tsv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CSV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;city_location_utf8.csv&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col_sep&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:&amp;quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tsv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat_range&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 24.34639481..45.36876935&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon_range&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 122.98877472..145.50658293&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;更に、都道府県別に色を付けたいので、都道府県の色情報をCityクラスに持たせます。色付けには前回同様&lt;code&gt;Colorable&lt;/code&gt; gemを使います。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;colorable&amp;quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;City&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Struct&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:lon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@pref_colors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pref_colors&lt;/span&gt;
      &lt;span class=&quot;vc&quot;&gt;@@pref_colors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;Colorable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:alice_blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prefs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vc&quot;&gt;@@cities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniq&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;Hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prefs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref_colors&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; {&amp;quot;三重県&amp;quot;=&amp;gt;#&amp;lt;Colorable::Color:0x007fbebb1db038 @name=&amp;quot;Antique White&amp;quot;, @rgb=[250, 235, 215], @hex=nil, @hsb=nil, @esc=nil&amp;gt;, &amp;quot;京都府&amp;quot;=&amp;gt;#&amp;lt;Colorable::Color:0x007fbebb1da458 @name=&amp;quot;Aqua&amp;quot;, @rgb=[0, 255, 255], @hex=nil, @hsb=nil, @esc=nil&amp;gt;, &amp;quot;佐賀県&amp;quot;=&amp;gt;#&amp;lt;Colorable::Color:0x007fbebb1d9440 @name=&amp;quot;Aquamarine&amp;quot;, @rgb=[127, 255, 212], @hex=nil, @hsb=nil, @esc=nil&amp;gt;, &amp;quot;兵庫県&amp;quot;=&amp;gt;#&amp;lt;Colorable::Color:0x007fbebb1d8158 @name=&amp;quot;Azure&amp;quot;, @rgb=[240, 255, 255], @hex=nil, @hsb=nil, @esc=nil&amp;gt;, &amp;quot;北海道&amp;quot;=&amp;gt;#&amp;lt;Colorable::Color:0x007fbebb1e3170 @name=&amp;quot;Beige&amp;quot;, @rgb=[245, 245, 220], @hex=nil, @hsb=nil, @esc=nil&amp;gt;, &amp;quot;千葉県&amp;quot;=&amp;gt;#&amp;lt;Colorable::Color:0x007fbebb1e1708 @name=&amp;quot;Bisque&amp;quot;, @rgb=[255, 228, 196], @hex=nil, @hsb=nil, @esc=nil&amp;gt;, ... , &amp;quot;鹿児島県&amp;quot;=&amp;gt;#&amp;lt;Colorable::Color:0x007fbebb1f3930 @name=&amp;quot;Ghost White&amp;quot;, @rgb=[248, 248, 255], @hex=nil, @hsb=nil, @esc=nil&amp;gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;日本地図の描画&lt;/h2&gt;

&lt;p&gt;さて、下準備ができました。gvizを使って日本地図を描画します。&lt;code&gt;graph.ru&lt;/code&gt;ファイルを作って次のようなコードを書きます。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# encoding: UTF-8&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;./city&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;neato&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Map of Japan&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;circle&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;filled&amp;#39;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat_range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon_range&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                           &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;!&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:japan&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;gvizで定義された&lt;code&gt;Numeric#norm&lt;/code&gt;を使ってCityオブジェクトが持っている緯度・経度情報を、生成されるグラフサイズに合わせて正規化します。これは、normの第２引数を試行錯誤して最適値を見つけます。Graphvizにおけるノードの絶対位置指定にはpos属性を使います。&lt;/p&gt;

&lt;p&gt;ターミナルでgvizコマンドを実行し、graphvizで生成された画像を開きます。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;% gviz
% open japan.dot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;さあ、出力です。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/japanmap_mono.png&quot; alt=&quot;japan noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;おみごと！自画自賛！antlaboさんありがとう！&lt;/p&gt;

&lt;p&gt;市町村役場の位置情報に基いて、私たちの国「日本」の姿かたちが描かれました。&lt;/p&gt;

&lt;h2&gt;日本地図のカラー化&lt;/h2&gt;

&lt;p&gt;前回同様、仕上げに色を付けます。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# encoding: UTF-8&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;./city&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;neato&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Map of Japan&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;circle&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;filled&amp;#39;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat_range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon_range&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                           &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;City&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref_colors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;fcolor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dark?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;white&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;black&amp;#39;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;!&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fillcolor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;aa&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fontcolor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fcolor&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:japan&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;出力はこちら。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/images/2013/03/jpmap_svg2.html&quot; title=&quot;Metro Map&quot;&gt;&lt;img src=&quot;/assets/images/2013/03/japanmap_color.png&quot; alt=&quot;japan noshadow&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;図をクリックするとSVGの頁が開きますので、手動で拡大できます（FirefoxはSVGのZoomに対応していないようです）。&lt;/p&gt;

&lt;p&gt;以下は、一部地域の拡大図です。&lt;/p&gt;

&lt;p&gt;近畿地方。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/japanmap_color_big1.png&quot; alt=&quot;japan noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;関東地方。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/japanmap_color_big2.png&quot; alt=&quot;japan noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;九州地方。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/japanmap_color_big3.png&quot; alt=&quot;japan noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Numeric#normの第２引数を調整することで、ノードの密度を調整出来ます。ちなみに、SVG出力は、&lt;code&gt;10..100&lt;/code&gt;で生成しました。&lt;/p&gt;

&lt;p&gt;今回は以上です。&lt;/p&gt;

&lt;p&gt;enjoy!&lt;/p&gt;

&lt;div&gt;&lt;script src='https://gist.github.com/5235218.js?file='&gt;&lt;/script&gt;
&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;


&lt;hr /&gt;

&lt;p style='color:red'&gt;=== Ruby関連電子書籍100円で好評発売中！ ===&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;/books/&quot; title=&quot;M'ELBORNE BOOKS&quot;&gt;M'ELBORNE BOOKS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2012/start_ruby.jpg&quot; alt=&quot;start_ruby&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2013/02/ruby_object_cover.png&quot; alt=&quot;ruby_object&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2013/03/ruby_trivia_cover.png&quot; alt=&quot;trivia&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot;&gt;
    &lt;ol&gt;
        &lt;li id='fn:1'&gt;ヘッダーの名前を一部編集しました &lt;a href='#fnref:1' rev='footnote'&gt;↩&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
&lt;/div&gt;



</content>
 </entry>
 
 <entry>
   <title>Graphvizで作る、私たちの国「日本」の本当の姿かたち</title>
   <link href="http://melborne.github.io/2013/03/22/map-of-japan"/>
   <updated>2013-03-22T00:00:00+09:00</updated>
   <id>http://melborne.github.io/2013/03/22/map-of-japan</id>
   <content type="html">&lt;p&gt;antlaboさんがGraphvizを使って、北海道の市町村の隣接を可視化したものを公開されています。&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://d.hatena.ne.jp/antlabo/20130320/1363796474&quot; title=&quot;Graphvizで北海道の市区町村の隣接を可視化してみました。 - 蟻の実験工房（別館ラボ）&quot;&gt;Graphvizで北海道の市区町村の隣接を可視化してみました。 - 蟻の実験工房（別館ラボ）&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;この可視化の元データはwikipediaの情報を元にantlaboさんが作られたそうです。スバラシイ。&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://d.hatena.ne.jp/antlabo/20121029/1351520444&quot; title=&quot;wikipediaの隣接市区町村の記載をデータベース化したものをcsvで公開 - 蟻の実験工房（別館ラボ）&quot;&gt;wikipediaの隣接市区町村の記載をデータベース化したものをcsvで公開 - 蟻の実験工房（別館ラボ）&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;で、記事の中で全国可視化はデータ量が多くて上手くいかなかった旨が書かれていたので、自分も試してみたところ、無事出力できましたのでここに公開したいと思います。&lt;/p&gt;

&lt;h2&gt;日本全国を可視化する&lt;/h2&gt;

&lt;p&gt;ここではGraphvizのRubyラッパーである拙作「&lt;a href=&quot;https://rubygems.org/gems/gviz&quot; title=&quot;gviz | RubyGems.org | your community gem host&quot;&gt;gviz&lt;/a&gt;」を使います。&lt;/p&gt;

&lt;h3&gt;隣接データの読み出し&lt;/h3&gt;

&lt;p&gt;まずは先のサイトから全国市町村隣接データ&lt;a href=&quot;http://spnene.antlabo.jp/data/city_rinsetsu_utf8.csv&quot;&gt;city_rinsetsu_utf8.csv&lt;/a&gt;を取得します。このデータのフォーマットは以下のようになっています。&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;ID(元),県名(元),市区町村名(元),ID(先),県名(先),市区町村名(先)&lt;/p&gt;&lt;/blockquote&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;673,三重県,いなべ市,626,岐阜県,大垣市
673,三重県,いなべ市,662,岐阜県,養老町
673,三重県,いなべ市,663,滋賀県,多賀町
673,三重県,いなべ市,721,三重県,東員町
673,三重県,いなべ市,722,三重県,桑名市
673,三重県,いなべ市,723,三重県,菰野町
673,三重県,いなべ市,712,滋賀県,東近江市
673,三重県,いなべ市,724,三重県,四日市市
673,三重県,いなべ市,675,岐阜県,海津市
796,三重県,亀山市,749,滋賀県,甲賀市
796,三重県,亀山市,773,三重県,鈴鹿市
  .
  .
  .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;このデータをRubyで読み出して扱いやすいように前処理します。具体的には、最初にデータを各県ごとにグループ化し、それを市町村IDで更にグループ化します。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# encoding: UTF-8&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;csv&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CSV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;city_rinsetsu_utf8.csv&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group_by&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# &amp;gt;&amp;gt; [[&amp;quot;三重県&amp;quot;, {&amp;quot;673&amp;quot;=&amp;gt;[[&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;626&amp;quot;, &amp;quot;岐阜県&amp;quot;, &amp;quot;大垣市&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;662&amp;quot;, &amp;quot;岐阜県&amp;quot;, &amp;quot;養老町&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;663&amp;quot;, &amp;quot;滋賀県&amp;quot;, &amp;quot;多賀町&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;721&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;東員町&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;722&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;桑名市&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;723&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;菰野町&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;712&amp;quot;, &amp;quot;滋賀県&amp;quot;, &amp;quot;東近江市&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;724&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;四日市市&amp;quot;], [&amp;quot;673&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;いなべ市&amp;quot;, &amp;quot;675&amp;quot;, &amp;quot;岐阜県&amp;quot;, &amp;quot;海津市&amp;quot;]], &amp;quot;796&amp;quot;=&amp;gt;[[&amp;quot;796&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;亀山市&amp;quot;, &amp;quot;749&amp;quot;, &amp;quot;滋賀県&amp;quot;, &amp;quot;甲賀市&amp;quot;], [&amp;quot;796&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;亀山市&amp;quot;, &amp;quot;773&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;鈴鹿市&amp;quot;], [&amp;quot;796&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;亀山市&amp;quot;, &amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;], [&amp;quot;796&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;亀山市&amp;quot;, &amp;quot;816&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;津市&amp;quot;]], &amp;quot;977&amp;quot;=&amp;gt;[[&amp;quot;977&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊勢市&amp;quot;, &amp;quot;915&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;明和町_(三重県)&amp;quot;], [&amp;quot;977&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊勢市&amp;quot;, &amp;quot;979&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;度会町&amp;quot;], [&amp;quot;977&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊勢市&amp;quot;, &amp;quot;1039&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;鳥羽市&amp;quot;], [&amp;quot;977&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊勢市&amp;quot;, &amp;quot;978&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;玉城町&amp;quot;], [&amp;quot;977&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊勢市&amp;quot;, &amp;quot;1040&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;南伊勢町&amp;quot;], [&amp;quot;977&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊勢市&amp;quot;, &amp;quot;1041&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;志摩市&amp;quot;]], &amp;quot;793&amp;quot;=&amp;gt;[[&amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;, &amp;quot;749&amp;quot;, &amp;quot;滋賀県&amp;quot;, &amp;quot;甲賀市&amp;quot;], [&amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;, &amp;quot;816&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;津市&amp;quot;], [&amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;, &amp;quot;837&amp;quot;, &amp;quot;奈良県&amp;quot;, &amp;quot;山添村&amp;quot;], [&amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;, &amp;quot;795&amp;quot;, &amp;quot;京都府&amp;quot;, &amp;quot;南山城村&amp;quot;], [&amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;, &amp;quot;796&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;亀山市&amp;quot;], [&amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;, &amp;quot;835&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;名張市&amp;quot;], [&amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;, &amp;quot;836&amp;quot;, &amp;quot;奈良県&amp;quot;, &amp;quot;奈良市&amp;quot;]], &amp;quot;1040&amp;quot;=&amp;gt;[[&amp;quot;1040&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;南伊勢町&amp;quot;, &amp;quot;977&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊勢市&amp;quot;], [&amp;quot;1040&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;南伊勢町&amp;quot;, &amp;quot;979&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;度会町&amp;quot;], [&amp;quot;1040&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;南伊勢町&amp;quot;, &amp;quot;981&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;大紀町&amp;quot;], [&amp;quot;1040&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;南伊勢町&amp;quot;, &amp;quot;1041&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;志摩市&amp;quot;]], &amp;quot;835&amp;quot;=&amp;gt;[[&amp;quot;835&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;名張市&amp;quot;, &amp;quot;793&amp;quot;, &amp;quot;三重県&amp;quot;, &amp;quot;伊賀市&amp;quot;], ... ]]}]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Graphvizで描画&lt;/h3&gt;

&lt;p&gt;下準備ができたので、Gvizを使ってGraphvizのDOTデータを生成します。各市町村をノードとし、隣接データに基いてノード同士を接続します。コードは次のようになります。&lt;/p&gt;

&lt;h4&gt;map_japan.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# encoding: UTF-8&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;csv&amp;quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;gviz&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CSV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;city_rinsetsu_utf8.csv&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group_by&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Graph&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;neato&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;overlap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Map of Japan&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;circle&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;filled&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;arrowhead&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;gray&amp;#39;&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighbors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;route&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;city_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighbors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intern&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;city_label&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighbors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/_\(.*?\)$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;city_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city_label&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:japan&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Graphのブロックの中で、グラフを生成します。globalでグラフ全体、nodesでノードの属性、edgesでエッジの属性をそれぞれ設定します。eachでdataの中の情報にアクセスして、その情報に基づきrouteでノードの繋がりを作り、nodeで各ノードの属性をセットします。&lt;/p&gt;

&lt;p&gt;コードを実行します。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;%ruby map_japan.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;これで、同ディレクトリに&lt;code&gt;japan.dot&lt;/code&gt;ファイルが生成されます。自分の環境でDOT生成には1分20秒くらい掛かりました。&lt;/p&gt;

&lt;p&gt;出力です。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/jpmap_mono.png&quot; alt=&quot;jpmap noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ややっ。&lt;/p&gt;

&lt;p&gt;何が何だかわからないでしょうが、拡大すると隣接市町村がエッジで繋がれているのがわかると思います。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/jpmap_mono_expand.png&quot; alt=&quot;jpmap noshadow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ちなみに、ノードの&lt;code&gt;shape:'circle'&lt;/code&gt;を指定しないでDOTを生成したときファイルを開けなかったので、antlaboさんの環境でうまくいかなかったのはこれが原因かもしれません（circle指定でgraphviz側の配置演算が簡単になるから？）。&lt;/p&gt;

&lt;h3&gt;カラー化&lt;/h3&gt;

&lt;p&gt;さて、やっぱりモノクログラフは寂しいので、県ごとに色付けしてみます。ここではカラー化に拙作「&lt;a href=&quot;https://rubygems.org/gems/colorable&quot; title=&quot;colorable | RubyGems.org | your community gem host&quot;&gt;colorable&lt;/a&gt;」を使います。colorableでは&lt;code&gt;Color.new&lt;/code&gt;で色を生成して、&lt;code&gt;Color#next&lt;/code&gt;で順次次の色を出力できるのでこれを使って、県ごとにノードの色を作ります。出力フォーマットとしてSVGも指定しましょう。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# encoding: UTF-8&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;csv&amp;quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;gviz&amp;quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;colorable&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CSV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;city_rinsetsu_utf8.csv&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group_by&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;Colorable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:alice_blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Graph&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;neato&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;overlap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Map of Japan&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;circle&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;filled&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;arrowhead&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;gray&amp;#39;&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighbors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;route&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;city_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighbors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intern&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;city_label&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighbors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/_\(.*?\)$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;fcolor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dark?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;white&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;black&amp;#39;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;city_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city_label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fillcolor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;fontcolor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fcolor&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:japan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:svg&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;出力です。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/images/2013/03/jpmap_svg.html&quot; title=&quot;Metro Map&quot;&gt;&lt;img src=&quot;/assets/images/2013/03/jpmap_color.png&quot; alt=&quot;metro noshadow&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;都道府県が色分けされました。ちなみに、一番下の水色エリアが「北海道」、中央左寄り黒が「埼玉」、その左上うぐいす色が「東京」、中央右寄り青色が「大阪」、上部紫色が「熊本」になります。それから、「沖縄」は右下深緑のエリアになります。やあ、北海道と沖縄って、こんなに近かったんですね！&lt;/p&gt;

&lt;p&gt;図をクリックするとSVGの頁が開きますので、手動で拡大してお住まいの都市を見つけて下さい。一部を拡大図したものが下の図になります（自分の環境mac lionではfirefoxで拡大縮小が効きませんでした）。&lt;/p&gt;

&lt;p&gt;enjoy!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2013/03/jpmap_color_expand.png&quot; alt=&quot;jpmap noshadow&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p style='color:red'&gt;=== Ruby関連電子書籍100円で好評発売中！ ===&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;/books/&quot; title=&quot;M'ELBORNE BOOKS&quot;&gt;M'ELBORNE BOOKS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2012/start_ruby.jpg&quot; alt=&quot;start_ruby&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2013/02/ruby_object_cover.png&quot; alt=&quot;ruby_object&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;
&lt;a href=&quot;/books/&quot;&gt;
  &lt;img src=&quot;/assets/images/2013/03/ruby_trivia_cover.png&quot; alt=&quot;trivia&quot; style=&quot;width:200px&quot; /&gt;
&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 
</feed>

